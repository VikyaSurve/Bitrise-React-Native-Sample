#!/bin/bash

# Extract version name from package.json
VERSION_NAME=$(jq -r .version package.json)

# Generate version code based on current date and time
VERSION_CODE=$(date +%Y%m%d%H%M)

# Path to the build.gradle file
GRADLE_FILE="android/app/build.gradle"

# Update the versionCode and versionName in build.gradle
sed -i.bak -E "s/versionCode [0-9]+/versionCode $VERSION_CODE/" $GRADLE_FILE
sed -i.bak -E "s/versionName \"[0-9.]+\"/versionName \"$VERSION_NAME\"/" $GRADLE_FILE

echo "Updated versionCode to $VERSION_CODE"
echo "Updated versionName to $VERSION_NAME"
